#!/bin/sh
# Volume control untuk PipeWire di Void Linux

case "$1" in
    up)
        pactl set-sink-volume @DEFAULT_SINK@ +5%
        ;;
    down)
        pactl set-sink-volume @DEFAULT_SINK@ -5%
        ;;
    mute)
        pactl set-sink-mute @DEFAULT_SINK@ toggle
        ;;
    *)
        echo "Usage: $0 {up|down|mute}"
        exit 1
        ;;
esac

# Get current volume
volume=$(pactl get-sink-volume @DEFAULT_SINK@ | grep -o '[0-9]*%' | head -1 | tr -d '%')
mute=$(pactl get-sink-mute @DEFAULT_SINK@ | grep -o "yes\|no")

# Show notification
if [ "$mute" = "yes" ]; then
    notify="Muted"
    icon="audio-volume-muted"
else
    notify="Volume: $volume%"
    if [ "$volume" -lt 33 ]; then
        icon="audio-volume-low"
    elif [ "$volume" -lt 66 ]; then
        icon="audio-volume-medium"
    else
        icon="audio-volume-high"
    fi
fi

# Use dunst or notify-send
if command -v dunstify >/dev/null 2>&1; then
    dunstify -t 1000 -i "$icon" "Volume" "$notify"
elif command -v notify-send >/dev/null 2>&1; then
    notify-send -t 1000 -i "$icon" "Volume" "$notify"
fi
